<html>
<head>
<title>Extensibella:  Extensibella Example:  mtc:lambda - Details</title>
<link href="../../../../style.css" rel="stylesheet" type="text/css">
<script src="../../../../actions.js"></script>
<link rel="icon" href="../../../images/favicon.png" type="image/x-icon">
</head>
<body class="extensibella">
<div id="header-logo">
<a href="../../../index.html">
<img class="header-logo" src="../../../images/Extensibella.png" alt="Extensibella logo">
</a>
</div>
<h2>Reasoning Details</h2>
<div class="section">
<pre class="code extensibella">
 < <b>Module mtc:lambda.</b>
</pre>
<pre class="code extensibella"id="1">
 &lt; <b>Theorem typeOfCtx_lookups :
     forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty -&gt; lookup EG X V -&gt; valueType V Ty.</b>

============================
 forall TG EG X Ty V,
   typeOfCtx TG EG -&gt; lookup TG X Ty -&gt; lookup EG X V -&gt; valueType V Ty
</pre>
<pre class="code extensibella"id="2">
 &lt; <b>induction on 2.</b>

IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
============================
 forall TG EG X Ty V,
   typeOfCtx TG EG -&gt; lookup TG X Ty @ -&gt; lookup EG X V -&gt; valueType V Ty
</pre>
<pre class="code extensibella"id="3">
 &lt; <b>intros TOC LT LV.</b>

Variables: TG EG X Ty V
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx TG EG
LT : lookup TG X Ty @
LV : lookup EG X V
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="4">
 &lt; <b>LT: case LT.</b>

Subgoal 1:

Variables: EG X Ty V Rest
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx ((X, Ty)::Rest) EG
LV : lookup EG X V
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="5">
 &lt; <b>LV: case LV.</b>

Subgoal 1.1:

Variables: X Ty V Rest Rest1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx ((X, Ty)::Rest) ((X, V)::Rest1)
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="6">
 &lt; <b>case TOC.</b>

Subgoal 1.1:

Variables: X Ty V Rest Rest1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
H1 : valueType V Ty
H2 : typeOfCtx Rest Rest1
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="7">
 &lt; <b>search.</b>

Subgoal 1.2:

Variables: X Ty V Rest Rest1 V1 K
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx ((X, Ty)::Rest) ((K, V1)::Rest1)
LV : K = X -&gt; false
LV1 : lookup Rest1 X V
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="8">
 &lt; <b>case TOC.</b>

Subgoal 1.2:

Variables: Ty V Rest Rest1 V1 K
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
LV : K = K -&gt; false
LV1 : lookup Rest1 K V
H1 : valueType V1 Ty
H2 : typeOfCtx Rest Rest1
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="9">
 &lt; <b>apply LV to _.</b>

Subgoal 2:

Variables: EG X Ty V Rest V1 K
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx ((K, V1)::Rest) EG
LV : lookup EG X V
LT : K = X -&gt; false
LT1 : lookup Rest X Ty *
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="10">
 &lt; <b>LV: case LV.</b>

Subgoal 2.1:

Variables: X Ty V Rest V1 K Rest1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx ((K, V1)::Rest) ((X, V)::Rest1)
LT : K = X -&gt; false
LT1 : lookup Rest X Ty *
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="11">
 &lt; <b>case TOC.</b>

Subgoal 2.1:

Variables: X Ty V Rest V1 Rest1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
LT : X = X -&gt; false
LT1 : lookup Rest X Ty *
H1 : valueType V V1
H2 : typeOfCtx Rest Rest1
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="12">
 &lt; <b>apply LT to _.</b>

Subgoal 2.2:

Variables: X Ty V Rest V1 K Rest1 V2 K1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
TOC : typeOfCtx ((K, V1)::Rest) ((K1, V2)::Rest1)
LT : K = X -&gt; false
LT1 : lookup Rest X Ty *
LV : K1 = X -&gt; false
LV1 : lookup Rest1 X V
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="13">
 &lt; <b>TOC: case TOC.</b>

Subgoal 2.2:

Variables: X Ty V Rest V1 Rest1 V2 K1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
LT : K1 = X -&gt; false
LT1 : lookup Rest X Ty *
LV : K1 = X -&gt; false
LV1 : lookup Rest1 X V
TOC : valueType V2 V1
TOC1 : typeOfCtx Rest Rest1
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="14">
 &lt; <b>apply IH to _ LT1 LV1.</b>

Subgoal 2.2:

Variables: X Ty V Rest V1 Rest1 V2 K1
IH : forall TG EG X Ty V,
       typeOfCtx TG EG -&gt; lookup TG X Ty * -&gt; lookup EG X V -&gt; valueType V Ty
LT : K1 = X -&gt; false
LT1 : lookup Rest X Ty *
LV : K1 = X -&gt; false
LV1 : lookup Rest1 X V
TOC : valueType V2 V1
TOC1 : typeOfCtx Rest Rest1
H1 : valueType V Ty
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="15">
 &lt; <b>search.</b>

Proof completed.
</pre>
<pre class="code extensibella"id="16">
 &lt; <b>Prove mtc:shared_declarations:type_preservation.</b>

Subgoal 1:

Variables: TG Ty EG E1 X Ty1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ty : typeOf TG (abs X Ty1 E1) Ty
Ev : eval EG (abs X Ty1 E1) (closure EG X E1) @
============================
 valueType (closure EG X E1) Ty
</pre>
<pre class="code extensibella"id="17">
 &lt; <b>case Ty.</b>

Subgoal 1:

Variables: TG EG E1 X Ty1 Ty3
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (abs X Ty1 E1) (closure EG X E1) @
H1 : typeOf ((X, Ty1)::TG) E1 Ty3
============================
 valueType (closure EG X E1) (arrowTy Ty1 Ty3)
</pre>
<pre class="code extensibella"id="18">
 &lt; <b>search.</b>

Subgoal 2:

Variables: TG Ty EG V GC X Body V2 E2 E1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ty : typeOf TG (app E1 E2) Ty
Ev : eval EG (app E1 E2) V @
Ev1 : eval EG E1 (closure GC X Body) *
Ev2 : eval EG E2 V2 *
Ev3 : eval ((X, V2)::GC) Body V *
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="19">
 &lt; <b>Ty: case Ty.</b>

Subgoal 2:

Variables: TG Ty EG V GC X Body V2 E2 E1 Ty1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (app E1 E2) V @
Ev1 : eval EG E1 (closure GC X Body) *
Ev2 : eval EG E2 V2 *
Ev3 : eval ((X, V2)::GC) Body V *
Ty : typeOf TG E1 (arrowTy Ty1 Ty)
Ty1 : typeOf TG E2 Ty1
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="20">
 &lt; <b>VT1: apply IH to _ Ty Ev1.</b>

Subgoal 2:

Variables: TG Ty EG V GC X Body V2 E2 E1 Ty1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (app E1 E2) V @
Ev1 : eval EG E1 (closure GC X Body) *
Ev2 : eval EG E2 V2 *
Ev3 : eval ((X, V2)::GC) Body V *
Ty : typeOf TG E1 (arrowTy Ty1 Ty)
Ty1 : typeOf TG E2 Ty1
VT1 : valueType (closure GC X Body) (arrowTy Ty1 Ty)
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="21">
 &lt; <b>VT2: apply IH to _ Ty1 Ev2.</b>

Subgoal 2:

Variables: TG Ty EG V GC X Body V2 E2 E1 Ty1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (app E1 E2) V @
Ev1 : eval EG E1 (closure GC X Body) *
Ev2 : eval EG E2 V2 *
Ev3 : eval ((X, V2)::GC) Body V *
Ty : typeOf TG E1 (arrowTy Ty1 Ty)
Ty1 : typeOf TG E2 Ty1
VT1 : valueType (closure GC X Body) (arrowTy Ty1 Ty)
VT2 : valueType V2 Ty1
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="22">
 &lt; <b>VTC: case VT1.</b>

Subgoal 2:

Variables: TG Ty EG V GC X Body V2 E2 E1 Ty1 TG1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (app E1 E2) V @
Ev1 : eval EG E1 (closure GC X Body) *
Ev2 : eval EG E2 V2 *
Ev3 : eval ((X, V2)::GC) Body V *
Ty : typeOf TG E1 (arrowTy Ty1 Ty)
Ty1 : typeOf TG E2 Ty1
VT2 : valueType V2 Ty1
VTC : typeOfCtx TG1 GC
VTC1 : typeOf ((X, Ty1)::TG1) Body Ty
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="23">
 &lt; <b>apply IH to _ VTC1 Ev3.</b>

Subgoal 2:

Variables: TG Ty EG V GC X Body V2 E2 E1 Ty1 TG1
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (app E1 E2) V @
Ev1 : eval EG E1 (closure GC X Body) *
Ev2 : eval EG E2 V2 *
Ev3 : eval ((X, V2)::GC) Body V *
Ty : typeOf TG E1 (arrowTy Ty1 Ty)
Ty1 : typeOf TG E2 Ty1
VT2 : valueType V2 Ty1
VTC : typeOfCtx TG1 GC
VTC1 : typeOf ((X, Ty1)::TG1) Body Ty
H1 : valueType V Ty
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="24">
 &lt; <b>search.</b>

Subgoal 3:

Variables: TG Ty EG V X
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ty : typeOf TG (var X) Ty
Ev : eval EG (var X) V @
Ev1 : lookup EG X V
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="25">
 &lt; <b>Ty: case Ty.</b>

Subgoal 3:

Variables: TG Ty EG V X
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (var X) V @
Ev1 : lookup EG X V
Ty : lookup TG X Ty
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="26">
 &lt; <b>apply typeOfCtx_lookups to _ Ty Ev1.</b>

Subgoal 3:

Variables: TG Ty EG V X
IH : forall TG E Ty EG V,
       typeOfCtx TG EG -&gt; typeOf TG E Ty -&gt; eval EG E V * -&gt; valueType V Ty
Rel : typeOfCtx TG EG
Ev : eval EG (var X) V @
Ev1 : lookup EG X V
Ty : lookup TG X Ty
H1 : valueType V Ty
============================
 valueType V Ty
</pre>
<pre class="code extensibella"id="27">
 &lt; <b>search.</b>

Proof completed.
</pre>
</div>
<div class="section">
<a class="navlink" href="../description.html">Back to example home</a>
</div>
</body>
</html>
